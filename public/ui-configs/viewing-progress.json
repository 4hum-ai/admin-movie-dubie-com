{
  "displayName": "Viewing Progress",
  "description": "Track viewing progress for titles per profile",
  "icon": "play-circle",
  "views": {
    "list": {
      "columns": [
        {
          "key": "profileId",
          "label": "Profile",
          "type": "ref",
          "refTo": "profiles",
          "sortable": true,
          "filterable": true,
          "width": "20%",
          "titleField": "profileId"
        },
        {
          "key": "titleId",
          "label": "Title",
          "type": "ref",
          "refTo": "titles",
          "sortable": true,
          "filterable": true,
          "width": "25%",
          "titleField": "titleId"
        },
        {
          "key": "progress",
          "label": "Progress",
          "type": "number",
          "sortable": true,
          "width": "15%",
          "align": "center",
          "formatter": "progress"
        },
        {
          "key": "positionSeconds",
          "label": "Position",
          "type": "number",
          "sortable": true,
          "width": "12%",
          "align": "center",
          "formatter": "duration"
        },
        {
          "key": "durationSeconds",
          "label": "Duration",
          "type": "number",
          "sortable": true,
          "width": "12%",
          "align": "center",
          "formatter": "duration"
        },
        {
          "key": "completed",
          "label": "Completed",
          "type": "boolean",
          "sortable": true,
          "filterable": true,
          "width": "10%",
          "align": "center"
        },
        {
          "key": "lastInteractionAt",
          "label": "Last Interaction",
          "type": "date",
          "sortable": true,
          "width": "16%",
          "align": "center",
          "formatter": "date"
        }
      ],
      "defaultSort": { "field": "lastInteractionAt", "direction": "desc" },
      "defaultFilters": [
        {
          "field": "profileId",
          "type": "ref",
          "refTo": "profiles",
          "label": "Profile"
        },
        {
          "field": "titleId",
          "type": "ref",
          "refTo": "titles",
          "label": "Title"
        },
        {
          "field": "completed",
          "type": "select",
          "label": "Completed",
          "options": [
            { "value": "true", "label": "Completed" },
            { "value": "false", "label": "In Progress" }
          ]
        }
      ],
      "searchableFields": [],
      "pageSize": 50,
      "actions": [
        {
          "name": "create",
          "label": "Add Progress",
          "type": "button",
          "icon": "plus",
          "variant": "primary",
          "permission": "viewing-progress:create"
        },
        {
          "name": "view",
          "label": "View",
          "type": "button",
          "icon": "eye",
          "variant": "secondary",
          "permission": "viewing-progress:read"
        },
        {
          "name": "edit",
          "label": "Edit",
          "type": "button",
          "icon": "edit",
          "variant": "secondary",
          "permission": "viewing-progress:update"
        },
        {
          "name": "delete",
          "label": "Delete",
          "type": "button",
          "icon": "trash",
          "variant": "danger",
          "permission": "viewing-progress:delete"
        }
      ]
    }
  },
  "detailView": {
    "sections": [
      {
        "title": "Progress Information",
        "fields": [
          {
            "key": "profileId",
            "label": "Profile",
            "type": "ref",
            "refTo": "profiles"
          },
          {
            "key": "titleId",
            "label": "Title",
            "type": "ref",
            "refTo": "titles"
          },
          {
            "key": "positionSeconds",
            "label": "Position (seconds)",
            "type": "number"
          },
          {
            "key": "durationSeconds",
            "label": "Duration (seconds)",
            "type": "number"
          },
          {
            "key": "progress",
            "label": "Progress",
            "type": "number",
            "formatter": "progress"
          },
          { "key": "completed", "label": "Completed", "type": "boolean" },
          {
            "key": "lastInteractionAt",
            "label": "Last Interaction At",
            "type": "date",
            "formatter": "date"
          }
        ]
      },
      {
        "title": "Timestamps",
        "fields": [
          {
            "key": "createdAt",
            "label": "Created At",
            "type": "date",
            "formatter": "date"
          },
          {
            "key": "updatedAt",
            "label": "Updated At",
            "type": "date",
            "formatter": "date"
          }
        ]
      }
    ]
  },
  "formView": {
    "fields": [
      {
        "key": "profileId",
        "label": "Profile",
        "type": "ref",
        "refTo": "profiles",
        "required": true,
        "placeholder": "Select profile"
      },
      {
        "key": "titleId",
        "label": "Title",
        "type": "ref",
        "refTo": "titles",
        "required": true,
        "placeholder": "Select title"
      },
      {
        "key": "positionSeconds",
        "label": "Position (seconds)",
        "type": "number",
        "placeholder": "0",
        "min": 0
      },
      {
        "key": "durationSeconds",
        "label": "Duration (seconds)",
        "type": "number",
        "placeholder": "0",
        "min": 0
      },
      {
        "key": "completed",
        "label": "Completed",
        "type": "boolean"
      }
    ]
  }
}
